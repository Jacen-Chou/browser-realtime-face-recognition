(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{152:function(e){e.exports={Wangqi:{name:"\u738b\u7426",descriptors:[[-.10361980646848679,.1365559995174408,.08856921643018723,-.055033713579177856,-.09451323747634888,.008560261689126492,-.06238088384270668,-.08615865558385849,.14352619647979736,-.01576712541282177,.1845581829547882,-.046809807419776917,-.23919440805912018,-.022086240351200104,-.04157407954335213,.13365167379379272,-.1504988968372345,-.17972934246063232,-.06446477025747299,-.09299115836620331,.0035594142973423004,.05173353850841522,-.06547198444604874,.038648948073387146,-.07497306913137436,-.295949250459671,-.06483300030231476,-.057214509695768356,.032492704689502716,-.12618878483772278,-.015501230955123901,.10051628947257996,-.1733630895614624,-.023811209946870804,.05282025784254074,.09385668486356735,-.047463517636060715,-.033542994409799576,.1475502997636795,.05652005225419998,-.18609876930713654,-.012182214297354221,.050393395125865936,.3466045558452606,.1989198476076126,.05764298141002655,-.04951340705156326,-.05672160163521767,.11935023963451385,-.2643532156944275,.056577831506729126,.22066932916641235,.1146049052476883,.10524395853281021,.05787283182144165,-.20726421475410461,.01370411179959774,.06185181438922882,-.19213147461414337,.018239904195070267,.061243996024131775,-.10905369371175766,-.084163136780262,-.17377085983753204,.2245502769947052,.16059446334838867,-.1003025695681572,-.180202454328537,.15246108174324036,-.13552667200565338,-.09156015515327454,.0917770266532898,-.12608277797698975,-.1171654611825943,-.27041175961494446,.03258992359042168,.3874758780002594,.10159481316804886,-.187261700630188,.043641552329063416,-.03469226881861687,.022345151752233505,.03189476951956749,.05658382177352905,-.13449442386627197,.059941746294498444,-.02692018821835518,-.02947569638490677,.15824390947818756,-.0008914940990507603,-.03491353243589401,.16408604383468628,-.03254662826657295,.025206241756677628,.07525932043790817,.008071132935583591,-.015769533812999725,-.022216299548745155,-.15080562233924866,-.04658856242895126,-.020022375509142876,-.14048700034618378,.007460407912731171,.09184176474809647,-.2238529771566391,.1739923506975174,.05176868662238121,.035674188286066055,-.015390010550618172,.024273289367556572,-.07283753901720047,-.008742041885852814,.20499619841575623,-.34656408429145813,.22321364283561707,.17037397623062134,.01785295456647873,.1307840645313263,.0406063087284565,.1164291724562645,-.07219158858060837,-.037014663219451904,-.11587028950452805,-.07196629047393799,.06403005123138428,-.03689946234226227,-.01889294758439064,.041793279349803925]]},GaoMingfei:{name:"\u9ad8\u9e23\u98de",descriptors:[[-.12735453248023987,.1120358482003212,.006890706717967987,-.04667782783508301,-.05271003767848015,-.052237726747989655,-.12257617712020874,-.13681627810001373,.0696803629398346,-.03131818398833275,.1565030813217163,-.08398781716823578,-.19210270047187805,-.09812358021736145,-.038236282765865326,.18930871784687042,-.18710099160671234,-.13971467316150665,-.03580265864729881,-.01676933839917183,.09032060205936432,.024227473884820938,-.05083131045103073,.06298862397670746,-.12045513093471527,-.2748155891895294,-.084427610039711,-.10878638923168182,.02325327880680561,.003885331330820918,-.08633449673652649,.03445601463317871,-.1812843382358551,-.07331494241952896,.10395850241184235,.11648087948560715,.030223423615098,-.039689723402261734,.1660594493150711,.01003651786595583,-.23944313824176788,.06651970744132996,.13450947403907776,.251018226146698,.21475054323673248,.0015843547880649567,.04714546352624893,-.08880668878555298,.15097996592521667,-.15064293146133423,.05370917171239853,.15320786833763123,.12982076406478882,.09450226277112961,.041880957782268524,-.15800563991069794,.01782028004527092,.14402861893177032,-.1347675770521164,.09086059033870697,.08879981935024261,-.07080966234207153,-.04025272652506828,-.0649493858218193,.17532378435134888,.09678778052330017,-.12231126427650452,-.23947535455226898,.09716019779443741,-.1343809962272644,-.13214688003063202,.09831223636865616,-.1712014526128769,-.13893774151802063,-.3571034073829651,-.004861378110945225,.41632717847824097,.10527870059013367,-.23214884102344513,.09689468145370483,.011893252842128277,-.03763621300458908,.16172784566879272,.16906720399856567,.016253778710961342,.06505484133958817,-.037450067698955536,-.013435129076242447,.276069313287735,-.0033087534829974174,-.05601450800895691,.17199239134788513,-.02916289120912552,.07795052975416183,.016378091648221016,.04172208160161972,-.032083190977573395,-.056769780814647675,-.12441711872816086,-.08417323231697083,.01617586985230446,-.03588220477104187,-.011720210313796997,.11588464677333832,-.16400031745433807,.11066277325153351,.028932929039001465,.08504874259233475,-.05685800313949585,.031035326421260834,-.06006499379873276,.04554665461182594,.14324511587619781,-.1959390789270401,.2489423155784607,.15654508769512177,.050160832703113556,.03735877573490143,.13213226199150085,.011208665557205677,.023907113820314407,-.011674506589770317,-.16859085857868195,-.07730142027139664,.07940100878477097,-.0337616503238678,.1347191035747528,.0074040647596120834]]},ZhouJiacheng:{name:"\u5468\u4f73\u57ce",descriptors:[[-.09741922467947006,.10399096459150314,.0738096609711647,.0048989118076860905,-.09937818348407745,.0001580495445523411,-.1345919668674469,-.10080160200595856,.07687916606664658,-.049371663480997086,.24036212265491486,-.03844667598605156,-.22762002050876617,-.08026669174432755,-.05920426547527313,.17334970831871033,-.17691755294799805,-.15695248544216156,.01978803053498268,-.0032542357221245766,.04811239242553711,.04070797935128212,-.018082603812217712,.014893400482833385,-.11039065569639206,-.33605560660362244,-.07386704534292221,-.06237933412194252,-.011940514668822289,-.057482972741127014,-.07256162911653519,.03172893077135086,-.18132324516773224,-.05653086304664612,.0839422196149826,.17331334948539734,-.05313756316900253,-.0473942756652832,.1702294796705246,.00015655747847631574,-.17602689564228058,.07262475043535233,.05995156615972519,.2732881009578705,.18790164589881897,.06121932342648506,.01980087161064148,-.14911313354969025,.010135425254702568,-.13579061627388,.05260978266596794,.2230851650238037,.08618972450494766,.09827890992164612,-.037016574293375015,-.1471189260482788,.04063531383872032,.07413554191589355,-.11397416889667511,.01993918977677822,.09715906530618668,-.08137151598930359,.06572405248880386,-.03281666710972786,.23633694648742676,.029643632471561432,-.1127731055021286,-.17600537836551666,.056456103920936584,-.142092764377594,-.14058424532413483,.03453628346323967,-.16069015860557556,-.176831915974617,-.3428683876991272,.040326621383428574,.42454031109809875,.06124196574091911,-.21097354590892792,.07445507496595383,-.002855028724297881,-.06792591512203217,.14603859186172485,.15551325678825378,-.018202051520347595,-.02369626611471176,-.09687336534261703,.010536049492657185,.2713949978351593,-.030936889350414276,-.04570836201310158,.1271519958972931,-.017578935250639915,.06467688828706741,.08713089674711227,.05911364033818245,-.0150794992223382,.04715697467327118,-.11272979527711868,-.01377867441624403,-.02212381549179554,-.09178312867879868,-.0071382722817361355,.12345656752586365,-.1428978592157364,.0801069512963295,.02863674983382225,-.004053890239447355,.008428992703557014,.024254363030195236,-.1527254730463028,-.07239434868097305,.18807624280452728,-.24555398523807526,.27470168471336365,.2042548954486847,.08498057723045349,.11879677325487137,.17142127454280853,.11765344440937042,-.023682545870542526,.004402012564241886,-.15375089645385742,-.03941820561885834,.02712518535554409,.001484560314565897,.1456311196088791,.03615803271532059]]}}},185:function(e,t,n){e.exports=n(350)},192:function(e,t,n){},194:function(e,t,n){},204:function(e,t){},206:function(e,t){},239:function(e,t){},240:function(e,t){},287:function(e,t,n){e.exports=n.p+"static/media/test.34e86f06.jpg"},350:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(7),o=n.n(c),i=(n(190),n(192),n(32)),s=n(33),u=n(37),l=n(34),p=n(38),h=n(359),f=n(353),m=n(182),d=n.n(m),b=(n(194),n(356)),v=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Browser Realtime Face Recognition"),r.a.createElement("li",null,r.a.createElement(b.a,{to:"/photo"},"Photo Input")),r.a.createElement("li",null,r.a.createElement(b.a,{to:"/camera"},"Video Camera")))}}]),t}(a.Component),x=n(115),g=n(10),w=n.n(g),y=n(19),E=n(357),j=n(28);function k(){return O.apply(this,arguments)}function O(){return(O=Object(y.a)(w.a.mark(function e(){var t;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="/browser-realtime-face-recognition/models",e.next=3,j.h(t);case 3:return e.next=5,j.f(t);case 5:return e.next=7,j.g(t);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function C(e){return M.apply(this,arguments)}function M(){return(M=Object(y.a)(w.a.mark(function e(t){var n,a,r,c,o,i=arguments;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:512,.5,a=new j.c({inputSize:n,scoreThreshold:.5}),r=!0,e.next=6,j.e(t);case 6:return c=e.sent,e.next=9,j.d(c,a).withFaceLandmarks(r).withFaceDescriptors();case 9:return o=e.sent,e.abrupt("return",o);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}var S=.5;function I(e){return D.apply(this,arguments)}function D(){return(D=Object(y.a)(w.a.mark(function e(t){var n,a,r;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object.keys(t),a=n.map(function(e){return new j.b(t[e].name,t[e].descriptors.map(function(e){return new Float32Array(e)}))}),r=new j.a(a,S),e.abrupt("return",r);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var R=n(287),U=n(152),_={imageURL:R,fullDesc:null,detections:null,descriptors:null,match:null},L=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).componentWillMount=Object(y.a)(w.a.mark(function e(){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k();case 2:return e.t0=n,e.next=5,I(U);case 5:return e.t1=e.sent,e.t2={faceMatcher:e.t1},e.t0.setState.call(e.t0,e.t2),e.next=10,n.handleImage(n.state.imageURL);case 10:case"end":return e.stop()}},e)})),n.handleImage=Object(y.a)(w.a.mark(function e(){var t,a,r=arguments;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:n.state.imageURL,e.next=3,C(t).then(function(e){e&&n.setState({fullDesc:e,detections:e.map(function(e){return e.detection}),descriptors:e.map(function(e){return e.descriptor})})});case 3:if(!n.state.descriptors||!n.state.faceMatcher){e.next=8;break}return e.next=6,n.state.descriptors.map(function(e){return n.state.faceMatcher.findBestMatch(e)});case 6:a=e.sent,n.setState({match:a});case 8:case"end":return e.stop()}},e)})),n.handleFileChange=function(){var e=Object(y.a)(w.a.mark(function e(t){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.resetState(),e.next=3,n.setState({imageURL:URL.createObjectURL(t.target.files[0]),loading:!0});case 3:n.handleImage();case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.resetState=function(){n.setState(Object(x.a)({},_))},n.state=Object(x.a)({},_,{faceMatcher:null}),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.imageURL,n=e.detections,a=e.match,c=null;return n&&(c=n.map(function(e,t){var n=e.box.height,c=e.box.width,o=e.box._x,i=e.box._y;return r.a.createElement("div",{key:t},r.a.createElement("div",{style:{position:"absolute",border:"solid",borderColor:"blue",height:n,width:c,transform:"translate(".concat(o,"px,").concat(i,"px)")}},a?r.a.createElement("p",{style:{backgroundColor:"blue",border:"solid",borderColor:"blue",width:c,marginTop:0,color:"#fff",transform:"translate(-3px,".concat(n,"px)")}},a[t]._label):null))})),r.a.createElement("div",null,r.a.createElement("input",{id:"myFileUpload",type:"file",onChange:this.handleFileChange,accept:".jpg, .jpeg, .png"}),r.a.createElement("div",{style:{position:"relative"}},r.a.createElement("div",{style:{position:"absolute"}},r.a.createElement("img",{src:t,alt:"imageURL"})),c||null))}}]),t}(a.Component),P=Object(E.a)(L),F=n(172),B=n.n(F),W=(n(289),n(352)),T=n(358),N=n(354),J=n(22),z=n(355),A=n(152),q=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).webcam=r.a.createRef(),n.state={fullDesc:null,detections:null,descriptors:null,faceMatcher:null,match:null,facingMode:null,loading:!0,showInput:!1,faceDescCache:null},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=Object(y.a)(w.a.mark(function e(){var t;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k();case 2:return e.next=4,I(A);case 4:return t=e.sent,this.setState({faceMatcher:t,loading:!1}),e.next=8,this.setInputDevice();case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"setInputDevice",value:function(){var e=Object(y.a)(w.a.mark(function e(){var t,n;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.enumerateDevices();case 2:t=(t=e.sent).filter(function(e){return"videoinput"===e.kind}),n={facingMode:{exact:"environment"}},t.length<2&&(n.facingMode="user"),this.setState(n),this.startCapture();case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"startCapture",value:function(){var e=this;this.interval=setInterval(function(){e.capture()},1500)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"capture",value:function(){var e=Object(y.a)(w.a.mark(function e(){var t,n,a=this;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.webcam.current){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,C(this.webcam.current.libCameraPhoto.getDataUri({}),160);case 4:(t=e.sent)&&this.setState({detections:t.map(function(e){return e.detection}),descriptors:t.map(function(e){return e.descriptor})}),this.state.descriptors&&this.state.faceMatcher&&(n=this.state.descriptors.map(function(e){return a.state.faceMatcher.findBestMatch(e)}),this.setState({match:n}));case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onTakePhoto",value:function(){var e=Object(y.a)(w.a.mark(function e(t){var n,a;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.state.faceMatcher,e.next=3,C(t,160);case 3:if(1===(a=e.sent).length){e.next=6;break}return e.abrupt("return",null);case 6:n.findBestMatch(a[0].descriptor),this.setState({faceDescCache:a[0].descriptor,showInput:!0});case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"onPressEnter",value:function(){var e=Object(y.a)(w.a.mark(function e(t){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({showInput:!1}),e.abrupt("return",null);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;if(this.state.loading)return r.a.createElement(W.a,{tip:"Loading...",delay:"200",size:"large"},r.a.createElement(T.a,{message:"\u6a21\u578b\u52a0\u8f7d\u4e2d",description:"\u7b2c\u4e00\u6b21\u6253\u5f00\u65f6\u95f4\u53ef\u80fd\u8f83\u957f\uff0c\u5982\u679c\u4e00\u76f4\u5728\u52a0\u8f7d\uff0c\u8fd9\u8fb9\u63a8\u8350\u4eb2\u79d1\u5b66\u4e0a\u7f51...",type:"info"}));var t=this.state,n=t.detections,a=t.match,c=t.facingMode,o=t.showInput,i=null,s="user"===c?"Front":"Back";c&&(i={width:420,height:420,facingMode:c});var u=null;return n&&(u=n.map(function(t,n){var c=e.webcam.current.libCameraPhoto.videoElement.clientHeight,o=e.webcam.current.libCameraPhoto.videoElement.clientWidth,i=null,s=null,u=null,l=null;return console.log(c,o),c<o?(i=t.box.height/480*c*.9,s=t.box.width/640*o*.7,u=o-t.box._x/640*o*1.1-s,l=t.box._y/480*c*.9):(i=t.box.height/480*c*.7,s=t.box.width/640*o*.9,u=.6*(o-t.box._x/640*o-s)*(1.4-t.box._x/200),l=t.box._y/480*c*.7),r.a.createElement("div",{key:n},r.a.createElement("div",{style:{position:"absolute",border:"solid",borderColor:"blue",height:i,width:s,transform:"translate(".concat(u,"px,").concat(l,"px)")}},a&&a[n]?r.a.createElement("p",{style:{backgroundColor:"blue",border:"solid",borderColor:"blue",width:s,marginTop:0,color:"#fff",transform:"translate(0px,".concat(i,"px)")}},a[n]._label,"  (",1-a[n]._distance,")",t.box._x):null))})),r.a.createElement("div",{className:"Camera",style:{display:"flex",flexDirection:"column"}},r.a.createElement("p",null,"Camera: ",s),r.a.createElement("div",{style:{position:"relative"}},i?r.a.createElement("div",{className:"inner",style:{position:"absolute"}},r.a.createElement(B.a,{audio:!1,ref:this.webcam,screenshotFormat:"image/jpeg",onTakePhoto:function(t){return e.onTakePhoto(t)}})):null,o?r.a.createElement(N.a,{placeholder:"Enter your username",prefix:r.a.createElement(J.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),suffix:r.a.createElement(z.a,{title:"Extra information"},r.a.createElement(J.a,{type:"info-circle",style:{color:"rgba(0,0,0,.45)"}})),onPressEnter:function(t){return e.onPressEnter(t)}}):null,u))}}]),t}(a.Component),G=Object(E.a)(q),H=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(h.a,{history:d()({basename:"/browser-realtime-face-recognition"})},r.a.createElement("div",{className:"route"},r.a.createElement(f.a,{exact:!0,path:"/",component:v}),r.a.createElement(f.a,{exact:!0,path:"/photo",component:P}),r.a.createElement(f.a,{exact:!0,path:"/camera",component:G}))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(H,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[185,2,1]]]);
//# sourceMappingURL=main.bb856358.chunk.js.map